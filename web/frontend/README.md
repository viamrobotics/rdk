# RDK Remote Control
Viam provides an open source remote control (RC) page as part of the RDK that allows for troubleshooting and control of components. RC is hosted locally on each robot as well as on Viam cloud.

## Running Locally

### Development Mode
To start the client development environment, first run the `go run` with the environmental variable `ENV=development` (e.g. `ENV=development go run web/cmd/server/main.go -debug -config etc/configs/fake.json`). 

Then navigate to `web/frontend` and run `npm start` in a new terminal tab. Visit `localhost:8080` to view the app, not `localhost:5173`. The latter is a hot module replacement server that rebuilds frontend asset changes.

### Production Mode
Remote Control can be run locally in production mode, which is useful in some situations, such as testing changes to the build or AppImage packaging process.

First run `make build-web` which will produce static assets into the `web/frontend/runtime-shared/static` folder. Then start the server with `go run` without the `ENV` variable (e.g. `go run web/cmd/server/main.go -debug -config etc/configs/fake.json`).

Note: If the build is not completed or fails, you should receive an warning message stating that files are missing. The RC page will not load in the case where a frontend build is not done.

For example:
`2023-03-02T17:18:20.492-0500	WARN	robot_server	web/web.go:662	Couldn't find any static files when running RDK. Make sure to run 'make build-web'.`

## AppImage
Remote Control is automatically included into the Viam AppImage using `go:embed`. The AppImage will automatically place all files in the runtime-shared folder based on [App FileSystemCode](https://github.com/viamrobotics/rdk/blob/main/web/app_fs.go).

The production files are generated by the [Github Actions workflow](https://github.com/viamrobotics/rdk/blob/main/.github/workflows/appimage.yml) after changes are merged. The workflow runs `make build:web` before generating the AppImage, including the files without them being commited to the Github Repository.