name: Test GCloud

on:
  workflow_dispatch:
  push:
    branches:
      - "debug-gcloud"

jobs:
  debug:
    name: Debug
    runs-on: ubuntu-latest
    timeout-minutes: 30

    steps:
    - name: Check out main branch code
      uses: actions/checkout@v3
      with:
        fetch-depth: 1

    - name: Authorize GCP
      uses: google-github-actions/auth@v1
      with:
        credentials_json: '${{ secrets.GCP_CREDENTIALS }}'

    - name: Set up Cloud SDK
      uses: google-github-actions/setup-gcloud@v1

    - name: SSH
      uses: lhotari/action-upterm@v1
